<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathJax 测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .formula {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>MathJax 测试页面</h1>
    
    <div class="test-section">
        <h3>基础符号测试</h3>
        <div class="formula">行内公式：$x^2 + y^2 = z^2$</div>
        <div class="formula">块级公式：$$H^{(l+1)} = \sigma(\tilde{D}^{-\frac{1}{2}} \tilde{A} \tilde{D}^{-\frac{1}{2}} H^{(l)} W^{(l)})$$</div>
        <div class="formula">希腊字母：$\alpha, \beta, \gamma, \delta, \epsilon, \theta, \lambda, \mu, \pi, \sigma, \tau, \phi, \chi, \psi, \omega$</div>
        <div class="formula">数学运算符：$\times, \div, \pm, \mp, \cdot, \ast, \leq, \geq, \neq, \approx, \equiv, \sim$</div>
    </div>
    
    <div class="test-section">
        <h3>复杂公式测试</h3>
        <div class="formula">$$g_\theta(\Lambda) \approx \sum_{k=0}^{K-1} \theta_k T_k(\tilde{\Lambda})$$</div>
        <div class="formula">$$\alpha_{ij}^{(l)} = \frac{\exp(\text{LeakyReLU}(a^T [W^{(l)} h_i^{(l)} \| W^{(l)} h_j^{(l)}]))}{\sum_{k \in \mathcal{N}(i)} \exp(\text{LeakyReLU}(a^T [W^{(l)} h_i^{(l)} \| W^{(l)} h_k^{(l)}]))}$$</div>
        <div class="formula">$$(f * g)(t) = \int f(\tau) g(t - \tau) d\tau$$</div>
    </div>
    
    <div class="test-section">
        <h3>矩阵和向量测试</h3>
        <div class="formula">$$\begin{pmatrix} a & b \\ c & d \end{pmatrix}$$</div>
        <div class="formula">$$\begin{bmatrix} 1 & 2 \\ 3 & 4 \end{bmatrix}$$</div>
        <div class="formula">$\vec{v}, \mathbf{v}, \hat{v}$</div>
    </div>
    
    <div class="test-section">
        <h3>集合符号测试</h3>
        <div class="formula">$\mathbb{N}, \mathbb{Z}, \mathbb{Q}, \mathbb{R}, \mathbb{C}$</div>
        <div class="formula">$\mathcal{A}, \mathcal{B}, \mathcal{C}, \mathcal{D}, \mathcal{E}$</div>
        <div class="formula">$\mathfrak{A}, \mathfrak{B}, \mathfrak{C}, \mathfrak{D}, \mathfrak{E}$</div>
    </div>
    
    <div class="test-section">
        <h3>测试状态</h3>
        <div id="status" class="status">
            <p>正在检查 MathJax 加载状态...</p>
        </div>
    </div>

    <!-- MathJax 配置 -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)'], ['$', '$']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams',
        packages: {'[+]': ['ams', 'newcommand', 'configmacros']}
      },
      svg: {
        fontCache: 'global'
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      },
      startup: {
        pageReady: () => {
          return MathJax.startup.defaultPageReady().then(() => {
            console.log('MathJax 渲染完成');
            document.getElementById('status').innerHTML = '<div class="success">✅ MathJax 加载成功，数学公式渲染正常！</div>';
          });
        }
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    
    <script>
    // 检查 MathJax 加载状态
    window.addEventListener('load', function() {
      setTimeout(function() {
        if (typeof MathJax === 'undefined') {
          document.getElementById('status').innerHTML = '<div class="error">❌ MathJax 加载失败，请检查网络连接或 CDN 状态</div>';
        } else if (!MathJax.startup || !MathJax.startup.document) {
          document.getElementById('status').innerHTML = '<div class="error">❌ MathJax 初始化失败</div>';
        }
      }, 5000);
    });
    </script>
</body>
</html>
